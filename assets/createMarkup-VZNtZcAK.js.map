{"version":3,"file":"createMarkup-VZNtZcAK.js","sources":["../../src/common.js","../../src/img/no_img.png","../../src/helpers/closeModal.js","../../src/img/close.png","../../src/helpers/findProduct.js","../../src/helpers/favoriteFun.js","../../src/helpers/createModal.js","../../src/helpers/createMarkup.js"],"sourcesContent":["const common ={\n        KEY_FAVORITE: 'favorite',\n        KEY_BASKET: 'basket',\n        KEY_INSTRUMENT: 'instruments',\n};\n\nexport { common }","export default \"__VITE_ASSET__BEu8qmmH__\"","function closeMadal(evt){\n    if(evt.code === 'Escape'){\n      this.close();\n    }\n}\n\nexport { closeMadal };","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAB6SURBVHgB7ZVBCsAgDASXvmR/aH/cp1gPHkqRmjRqEDLgRdcMiBogCIKFnGVQkWfdY5bmMi7I5KzZDKOcj0I9uSY7TC7JDJd/rU2Tt+amwJdoibQl/y09sAmEw1ETDpeLcHhOhMMHQkVBTbaLpUkkGEnQt0WzNAgCMTf64Es4we8RJwAAAABJRU5ErkJggg==\"","import { instruments } from '../instruments';\n// console.log(instruments);\n\n// import { common } from '../common';\n// const  { KEY_FAVORITE, KEY_BASKET, KEY_INSTRUMENT }   =   common;\n\n// const allInstruments = JSON.parse(localStorage.getItem(KEY_INSTRUMENT));\n// console.log( allInstruments);\n\nfunction findProduct(elem){\n    const productId = Number(elem.closest('.js-card').dataset.id)\n    const instruments = JSON.parse(localStorage.getItem(KEY_INSTRUMENT));\n   return instruments.find(({id}) => id === productId);\n   \n}\n\n\nexport { findProduct };","import { common } from '../common';\nconst{ KEY_FAVORITE, KEY_BASKET, KEY_INSTRUMENT } = common;\n// import { instruments } from '../instruments';\nimport { findProduct } from './findProduct';\n// const allInstruments = JSON.parse(localStorage.getItem(KEY_INSTRUMENT));\n// import { allInstruments } from '../index';\nimport { stringify } from 'postcss';\n\n// let favoriteArr = JSON.parse(localStorage.getItem('favorite01')) ?? [];\n// let basketArr = JSON.parse(localStorage.getItem(KEY_BASKET)) ?? [];\n// console.log(favoriteArr);\n\n// let a = 0;\nfunction toFavorite(elemFuv){\n//  console.log(a llInstruments);\n\n                const product = findProduct(elemFuv);\n                console.log(product);\n               //  console.log(favoriteArr);\n               let favoriteArr = JSON.parse(localStorage.getItem('favorite01')) ?? [];\n                const inStorage = favoriteArr.some((itm)=> itm.id === product.id);\n                console.log(inStorage);//// false or true\n                                                     \n        if(inStorage){\n          //    product.presentFuv = 1;\n               console.log('if');\n               console.log(product);\n               let favoriteArr = JSON.parse(localStorage.getItem('favorite01')) ?? [];\n               favoriteArr = favoriteArr.filter((itm)=>itm.id!==product.id);\n               localStorage.setItem('favorite01', JSON.stringify(favoriteArr));\n            \n              \n                                        // allInstruments = allInstruments.map(itm =>{\n                                        // if(itm.id === product.id) {\n                                        // itm.presentFuv = 0;\n                                        //     }      \n                                        //          })\n               // localStorage.setItem(KEY_INSTRUMENT, JSON.stringify(allInstruments)); \n             \n               //  product.presentFuv = 0;\n               //   localStorage.setItem('favorite01', JSON.stringify(favoriteArr));\n               \n              \n           }else{\n                // console.log(allInstruments);\n               console.log('else'); \n               console.log(product);\n               product.presentFuv = 1;\n               \n               favoriteArr.push(product);\n               console.log(favoriteArr);\n               \n               localStorage.setItem('favorite01', JSON.stringify(favoriteArr));\n                \n                                   // allInstruments = allInstruments.map((itm) =>{\n                                   //      // console.log(itm.id);\n                                   //      // console.log(product.id);\n                                   //       if(itm.id === product.id) {\n                                             \n                                   //        itm.presentFuv = 1;\n\n                                   //        return itm;\n                                   //      //  console.log(itm.presentFuv);\n                                   //           }  \n                                   //           return itm;    \n                                   //               })\n               // localStorage.setItem(KEY_INSTRUMENT, JSON.stringify(allInstruments));\n               // console.log(allInstruments);\n               //    a = a + 1;\n               // console.log(a);\n             \n\n              \n               // console.log(JSON.parse(localStorage.getItem(KEY_INSTRUMENT)));                                 \n               \n               }\n  }\n// console.log(a);\n\n\n function toBusket(elemBus, allInstruments){\n                const product = findProduct(elemBus, allInstruments);\n                const inStorage = basketArr.some(({ id })=> id === product.id);\n                                                                           \n        if(inStorage){\n              \n               basketArr = basketArr.filter((itm)=>itm.id!==product.id);\n               localStorage.setItem(KEY_BASKET, JSON.stringify(basketArr));\n                                        allInstruments = allInstruments.map(itm =>{\n                                        if(itm.id === product.id) {\n                                        itm.presentBas = 0;\n                                            }      \n                                                 })\n                                           \n               // localStorage.setItem(KEY_INSTRUMENT, JSON.stringify(allInstruments));  \n               \n\n                    \n          }else{\n               product.presentBas = 1;                    \n               basketArr.push(product);\n               localStorage.setItem(KEY_BASKET, JSON.stringify(basketArr)); \n                                        allInstruments = allInstruments.map(itm =>{\n                                        if(itm.id === product.id) {\n                                        itm.presentBas = 1;\n                                            }      \n                                                 })\n               // localStorage.setItem(KEY_INSTRUMENT, JSON.stringify(allInstruments));  \n               \n          }\n }\n\n\n\nexport { toFavorite, toBusket };  \n","import * as basicLightbox from 'basiclightbox'\nimport \"basiclightbox/dist/basicLightbox.min.css\";\n\nlet AddToFav = 'Add to favorite';\nlet RemoveFav = 'Remove from';\nlet AddToBas = 'Add to basket';\nlet RemoveBas = 'Remove from';\n\nimport { common } from '../common';\nconst  { KEY_FAVORITE, KEY_BASKET,  KEY_INSTRUMENT} = common;\n// const allInstruments = JSON.parse(localStorage.getItem(KEY_INSTRUMENT));\nlet favoriteArr = JSON.parse(localStorage.getItem('favorite01')) ?? [];\nconsole.log(favoriteArr);\n// console.log(allInstruments);\n// import { allInstruments } from '../index';\n// console.log(allInstruments);\n\nimport {  closeMadal } from './closeModal';\nimport { createMarkup } from './createMarkup';\nimport    closeIcon from '../img/close.png';\nimport { \n          toFavorite,\n          toBusket,\n                     } from './favoriteFun';\n\nconst favList = document.querySelector('.favorite_list');\nconst basketList = document.querySelector('.checkout_list');\nconst indexPage = document.getElementById('index');\nexport const favoritePage = document.getElementById('favorite');\nexport const basketPage = document.getElementById('basket');\n\nfunction createModal({img, name, price, description, id, presentFuv, presentBas}){\n  let favoriteArr = JSON.parse(localStorage.getItem('favorite01')) ?? [];\n  console.log(favoriteArr);\n     const instance = basicLightbox.create(`\n\t    <div class=\"modal js-card\" data-id=${id}>\n            <div class=\"cross\">\n                 <img src=${closeIcon} alt=\"close\">\n            </div>\n            <img src=\"${img}\" alt=\"${name}\" width=\"300\">\n            <h2>${name} <span>id${id}</span></h2>\n            <h3>${price}point</h3>\n                <p>${presentFuv}</p>\n                <p>${presentBas}</p>\n\n            <p>${description}</p>\n              <ul class=\"container_for_button\">\n                <li> \n                  <button class=\"button js-favorite button_fav\" type=\"button\">\n                       'Add to favorite'\n                  </button>\n                </li>\n                <li> \n                  <button class=\"button js-basket button_fav\" type=\"button\">\n                        <span class=\"no\">Remove from busket</span>\n                        <span class=\"yes vis\">Add to basket</span>\n                  </button>\n                </li>  \n              </ul>\n      </div>\n`, {\n    handler: null,\n    onShow(instance){\n      // console.log(this);\n      this.handler = closeMadal.bind(instance);\n      document.addEventListener('keydown', this.handler);\n\n  },\n    onClose(){\n      // console.log(this);\n      document.removeEventListener('keydown', this.handler);\n      cross.removeEventListener('click', toClose);\n  },\n  \n});\n\n\ninstance.show();\n\n                    const cross = document.querySelector('.cross');\n                    // console.log(cross);\n                    cross.addEventListener('click', toClose);\n                    function toClose(){\n                    // console.log('whoa!');\n                    instance.close();\n                    }\n\n const modal = document.querySelector('.modal');\n//  console.log(modal);\n// const favoriteModal = document.querySelector('.modal ul li button.js-favorite');\n// const basketModal =   document.querySelector('.modal ul li button.js-basket');\nconst btnFavorite = document.querySelector('div.modal button.js-favorite');\n// const no =  document.querySelector('button.js-favorite span.no');\n                    // console.log(favoriteModal);\n                    // console.log(basketModal);\n modal.addEventListener('click', onClick);\n                    // console.log(favoritePage);\n                    // console.log(basketPage);\n                    // console.log(indexPage);\n                                          function onClick(evt){\n                                          // console.log(evt.target);\n                                          // console.log(evt.target.closest('.js-favorite'));\n                                                \n                                          if(evt.target.closest('.js-favorite')){\n                 const sel = evt.target.closest('.js-favorite');\n                 //const yes = sel.querySelector('.yes');\n                 //const no = sel.querySelector('.no');\n                             ;                    \n                                                // yes.classList.toggle('vis');\n                                                // no.classList.toggle('vis');\n                                                // console.log(evt.target.closest('.js-favorite'));\n                                                if(indexPage){\n                                             \n                // if(favoriteArr.some((itm)=>itm.id ===id)){\n                //   btnFavorite.textContent='No'; \n                //  }else{\n                //   btnFavorite.textContent='Add';\n                //  }   \n    // const allInstruments = JSON.parse(localStorage.getItem(KEY_INSTRUMENT));\n                                                  \n                                          // console.log(allInstruments);  \nconst allInstruments02 = JSON.parse(localStorage.getItem(KEY_INSTRUMENT));\n                toFavorite(evt.target, allInstruments02); \n//  let favoriteArr = JSON.parse(localStorage.getItem('favorite01')) ?? [];               \n// console.log(favoriteArr);     \n              \n                \n                                              \n                                                }\n                //                                 if(favoritePage){\n                // toFavorite(evt.target, allInstruments);\n                // const favorite = JSON.parse(localStorage.getItem(KEY_FAVORITE)) ?? [];\n                // createMarkup(favorite, favList);\n                //                                 }\n                //                                 if(basketPage){\n                // toFavorite(evt.target, allInstruments);\n                //                                 }\n                                            }\n \n                                          if(evt.target.closest('.js-basket')){\n                                                // console.log(evt.target.closest('.js-basket'));\n                 const sel = evt.target.closest('.js-basket');\n                 const yes = sel.querySelector('.yes');\n                 const no = sel.querySelector('.no');                              \n                                                 yes.classList.toggle('vis');\n                                                 no.classList.toggle('vis');\n\n                                                if(indexPage){\n                toBusket(evt.target, allInstruments);\n                                                }\n                                                if(basketPage){\n                toBusket(evt.target, allInstruments);\n                const basketArr = JSON.parse(localStorage.getItem(KEY_BASKET)) ?? [];\n                createMarkup(basketArr,  basketList);  \n                                                }\n                                                if(favoritePage){\n                toBusket(evt.target, allInstruments);\n                                                }\n                                            }\n                                          }\n}\n\n\nexport { createModal };\n\n\n\n//<span class=\"yes\">Add to favorite</span>\n//<span class=\"no vis\">Remove from busket</span>","import noImg from '../img/no_img.png';\nlet AddToFav = 'Add to favorite';\nlet RemoveFav = 'Remove from';\nlet AddToBas = 'Add to basket';\nlet RemoveBas = 'Remove from';\n\nimport { \n            favoritePage,\n            basketPage\n                            } from './createModal';\n// console.log(favoritePage);\n\nconst visible = 'visible';\nconst invisible = 'invisible';\n\n\nfunction createMarkup(arr, list){\n   \n        let markup;\n        if(arr.length){\n        markup =  arr.map(({id, img, name, presentFuv, presentBas})=>`\n                    <li data-id=${id} class=\"card js-card\">\n                    <img src=\"${img}\" alt=\"${name}\" width=\"300\">\n                    <h2>${name}</h2>\n                    \n                    <span>id${id}</span>\n                    \n                    <p></p>\n                    <p></p>\n                    \n                    <p><a href=\"#\" class=\"info js-info\">More Information (Modal)</a></p>\n                    <div class=\"${ favoritePage ?? basketPage ? invisible : visible }\">\n        <button class=\"js-favorite\" type=\"button\">${presentFuv ? RemoveFav : AddToFav}</button>\n        <button class=\"js-basket\" type=\"button\">${presentBas ? RemoveBas : AddToBas}</button>\n                    </div>\n                    </li>\n                    `).join('');\n                list.innerHTML = markup;\n    }else{\n        markup =   `<li class=\"js-card\">\n                    <img src=${noImg} alt=\"404\" width=\"300\">\n                    </li>`\n                list.innerHTML = markup;\n    }\n};\n\nexport { createMarkup };\n\n\n\n//////<p class=\"present\"><b>Favorite</b><span>${presentFuv}</span></p>\n//////<p class=\"present\"><b>Basket</b><span>${presentBas}</span></p>\n\n"],"names":["common","noImg","closeMadal","evt","closeIcon","findProduct","elem","productId","id","KEY_BASKET","toFavorite","elemFuv","product","favoriteArr","inStorage","itm","toBusket","elemBus","allInstruments","KEY_INSTRUMENT","basketList","indexPage","favoritePage","basketPage","createModal","img","name","price","description","presentFuv","presentBas","instance","basicLightbox.create","cross","toClose","modal","onClick","sel","yes","no","basketArr","createMarkup","AddToFav","RemoveFav","AddToBas","RemoveBas","visible","invisible","arr","list","markup"],"mappings":"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"}